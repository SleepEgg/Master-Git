* [Git基础与原理](#Git基础与原理)
    * [Git是如何管理文件数据的](#Git是如何管理文件数据的)
    * [Git与其他版本管理工具的不同](#Git与其他版本管理工具的不同)
      * [集中式VS分布式](#集中式VS分布式)
    * [Git的三种状态](#Git的三种状态)

# Git基础与原理

## Git是如何管理文件数据的
Git把数据看作是对小型文件系统的一组快照。每次提交更新，或在Git中保存项目状态时，它主要对当时的全部文件制作一个快照并保存这个快照的索引。为了高效，如果文件没有修改，Git不再重新存储该文件，而是只保留一个链接指向之前存储的文件。Git对待数据更像是一个快照流。如下图所示：
![git文件管理](/img/git.png)
## Git与其他版本管理工具的不同
### 文件管理方式的不同
其他版本控制系统，例如：CVS、Subversion、Perforce、Bazzar等等，将他们保存的信息看作是一组基本文件和每个文件随时间逐步积累的差异。存储每个文件与初始版本的差异，如下图所示：
![非git文件管理](/img/nogit.png)
### 集中式VS分布式
CVS及SVN都是集中式的版本控制系统，而Git是分布式版本控制系统，集中式和分布式版本控制系统有什么区别？
1. 集中式版本控制系统

版本库集中存放在中央服务器，干活的时候，用自己的电脑先从中央服务器取得最新的版本，然后开始干活。干活完了，在把自己的活儿推送给中央服务器。中央服务器好比是一个图书馆，你要改一本书，必须先从图书馆借出来，然后回到家自己改，改完了，再放回图书馆。 集中式版本控制系统最大的毛病就是必须联网才能工作。
![集中式](/img/center.jpg)
2. 分布式版本控制系统

分布式系统没有中央服务器，每个人的电脑里都有完整的版本库，这样，你工作的时候就不要联网了，因为版本库就在你的电脑上。既然每个人电脑上都有一个完整的版本库，那多个人如何协作呢？比方说你在自己电脑上改了文件A，你的同事也在他的电脑上改了文件A，这时，你们俩之间只需要把各自的修改推送给对方，就可以互相看到对方的修改了。

和集中式版本控制系统相比，分布式版本控制系统的安全性要高很多，因为每个人电脑里都有完整的版本库，某一个人的电脑坏掉了不要紧，随便从其他人那里复制一个就可以了。而集中式版本控制系统的中央服务器要是出了问题，所有人都没法干活了。
![分布式](/img/div.jpg)

## Git的三种状态
Git有三种状态，你的文件可能处于其中之一：已提交（committed）、已修改（modified）和已暂存（stagged）。
* 已提交：表示数据已经安全的保存在本地数据中。
* 已修改：表示修改了文件，但还没保存到数据库中。
* 已暂存：表示对一个已修改文件的当前版本做了标记，使之包含在下次提交的快照中。

由此引入Git项目的三个工作区域的概念：Git仓库、工作目录以及暂存区域。如下图所示：
![](/img/threestats.png)
* 工作目录，就是本地电脑中的文件夹，是对项目某个版本提取出来的内容。这些从Git仓库的压缩数据库中提取出来的文件，放在磁盘上供你使用或修改。
* 暂存区域是一个文件，保存了下次讲提交的文件列表信息，一般在Git仓库目录中。
* Git仓库目录是Git用来保存项目的元数据和对象数据库的地方。这是Git中最重要的部分，从其他计算机克隆仓库时，拷贝的就是这里的数据。

基本的Git工作流程如下：
1. 在工作目录中修改文件
2. 暂存文件，将文件的快照放入暂存区域
3. 提交更新，找到暂存区域的文件，将快照永久性存储得到Git仓库目录
